<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Spatnav sanity check</title>
    <script src="../../polyfill/spatial-navigation-polyfill.js"></script>
    <link rel="stylesheet" href="test.css">
    <link rel="stylesheet" href="calendar.css">
    <script src="test.js"></script>
  </head>
  <body onload="onload()">
    <div class="wrapper" id="wrapper">
      <div class="sidebar">
        <div class="date"></div>
        <div class="time">note</div>
        <div class="time">7 am</div>
        <div class="time">8 am</div>
        <div class="time">9 am</div>
        <div class="time">10 am</div>
        <div class="time">11 am</div>
        <div class="time">12 pm</div>
        <div class="time">1 pm</div>
        <div class="time">2 pm</div>
        <div class="time">3 pm</div>
        <div class="time">4 pm</div>
        <div class="time">5 pm</div>
        <div class="time">6 pm</div>
        <div class="time">7 pm</div>
        <div class="time">8 pm</div>
        <div class="time">9 pm</div>
        <div class="date extra"></div>
        <div class="time extra">note</div>
        <div class="time extra">7 am</div>
        <div class="time extra">8 am</div>
        <div class="time extra">9 am</div>
        <div class="time extra">10 am</div>
        <div class="time extra">11 am</div>
        <div class="time extra">12 pm</div>
        <div class="time extra">1 pm</div>
        <div class="time extra">2 pm</div>
        <div class="time extra">3 pm</div>
        <div class="time extra">4 pm</div>
        <div class="time extra">5 pm</div>
        <div class="time extra">6 pm</div>
        <div class="time extra">7 pm</div>
        <div class="time extra">8 pm</div>
        <div class="time extra">9 pm</div>
        <div class="date extra"></div>
        <div class="time extra">note</div>
        <div class="time extra">7 am</div>
        <div class="time extra">8 am</div>
        <div class="time extra">9 am</div>
        <div class="time extra">10 am</div>
        <div class="time extra">11 am</div>
        <div class="time extra">12 pm</div>
        <div class="time extra">1 pm</div>
        <div class="time extra">2 pm</div>
        <div class="time extra">3 pm</div>
        <div class="time extra">4 pm</div>
        <div class="time extra">5 pm</div>
        <div class="time extra">6 pm</div>
        <div class="time extra">7 pm</div>
        <div class="time extra">8 pm</div>
        <div class="time extra">9 pm</div>
        <div class="date extra"></div>
        <div class="time extra">note</div>
        <div class="time extra">7 am</div>
        <div class="time extra">8 am</div>
        <div class="time extra">9 am</div>
        <div class="time extra">10 am</div>
        <div class="time extra">11 am</div>
        <div class="time extra">12 pm</div>
        <div class="time extra">1 pm</div>
        <div class="time extra">2 pm</div>
        <div class="time extra">3 pm</div>
        <div class="time extra">4 pm</div>
        <div class="time extra">5 pm</div>
        <div class="time extra">6 pm</div>
        <div class="time extra">7 pm</div>
        <div class="time extra">8 pm</div>
        <div class="time extra">9 pm</div>
        <div class="date extra"></div>
        <div class="time extra">note</div>
        <div class="time extra">7 am</div>
        <div class="time extra">8 am</div>
        <div class="time extra">9 am</div>
        <div class="time extra">10 am</div>
        <div class="time extra">11 am</div>
        <div class="time extra">12 pm</div>
        <div class="time extra">1 pm</div>
        <div class="time extra">2 pm</div>
        <div class="time extra">3 pm</div>
        <div class="time extra">4 pm</div>
        <div class="time extra">5 pm</div>
        <div class="time extra">6 pm</div>
        <div class="time extra">7 pm</div>
        <div class="time extra">8 pm</div>
        <div class="time extra">9 pm</div>
        <div class="date extra"></div>
        <div class="time extra">note</div>
        <div class="time extra">7 am</div>
        <div class="time extra">8 am</div>
        <div class="time extra">9 am</div>
        <div class="time extra">10 am</div>
        <div class="time extra">11 am</div>
        <div class="time extra">12 pm</div>
        <div class="time extra">1 pm</div>
        <div class="time extra">2 pm</div>
        <div class="time extra">3 pm</div>
        <div class="time extra">4 pm</div>
        <div class="time extra">5 pm</div>
        <div class="time extra">6 pm</div>
        <div class="time extra">7 pm</div>
        <div class="time extra">8 pm</div>
        <div class="time extra">9 pm</div>
        <div class="date extra"></div>
        <div class="time extra">note</div>
        <div class="time extra">7 am</div>
        <div class="time extra">8 am</div>
        <div class="time extra">9 am</div>
        <div class="time extra">10 am</div>
        <div class="time extra">11 am</div>
        <div class="time extra">12 pm</div>
        <div class="time extra">1 pm</div>
        <div class="time extra">2 pm</div>
        <div class="time extra">3 pm</div>
        <div class="time extra">4 pm</div>
        <div class="time extra">5 pm</div>
        <div class="time extra">6 pm</div>
        <div class="time extra">7 pm</div>
        <div class="time extra">8 pm</div>
        <div class="time extra">9 pm</div>
      </div>
      <div class="weekly sun">
        <div class="date">Sun 5</div>
        <div class="schedule" id="s13" tabindex="1">Arrival to SF</div>
        <div class="schedule private" id="s15" tabindex="1">Lunch with Jesse</div>
        <div class="schedule private" id="s14" tabindex="1">Dinner</div>
      </div>
      <div class="content"></div>
      <div class="weekly mon">
        <div class="date">Mon 6</div>
        <div class="schedule anniversary" id="s1" tabindex="1">Father's Birthday</div>
        <div class="schedule work" id="s2" tabindex="1">CSS WG Meeting</div>
        <div class="schedule work" id="s9" tabindex="1">CSS WG Meeting</div>
      </div>
      <div class="weekly tue">
        <div class="date">Tue 7</div>
        <div class="schedule work" id="s3" tabindex="1">CSS WG Meeting</div>
        <div class="schedule work" id="s10" tabindex="1">CSS WG Meeting</div>
      </div>
      <div class="weekly wed">
        <div class="date">Wed 8</div>
        <div class="schedule work" id="s4" tabindex="1">Breakout Session</div>
        <div class="schedule work" id="s21" tabindex="1">ice breaking</div>
        <div class="schedule work" id="s20" tabindex="1">Team Meeting</div>
      </div>
      <div class="weekly thu">
        <div class="date">Thu 9</div>
        <div class="schedule work" id="s5" tabindex="1">Meeting for Proposal Review</div>
        <div class="schedule private" id="s12" tabindex="1">Dinner with Friends</div>
      </div>
      <div class="weekly fri">
        <div class="date">Fri 10</div>
        <div class="schedule private" id="s16" tabindex="1">Run</div>
        <div class="schedule work" id="s19" tabindex="1">Review Follow Up</div>
      </div>
      <div class="weekly sat">
        <div class="date">Sat 11</div>
        <div class="schedule todo" id="s17" tabindex="1">Pack for Trip</div>
        <div class="schedule private" id="s18" tabindex="1">Call to Nicole</div>
        <div class="schedule private" id="s6" tabindex="1">Lunch with Daniel</div>
        <div class="schedule" id="s7" tabindex="1">Departure from SF</div>
      </div>
    </div>
  </body>

  <script type="text/javascript">
    function changeRule(ruleType) {
      document.getElementById("wrapper").style.setProperty('--spatial-navigation-function', ruleType);
    }
    var onload = () => {
      testInit();
      let testNum = 1;
      let container1 = document.querySelector('#c1');

      testRun(function() {
        changeRule('grid');
        document.querySelector('#s1').focus();
        navigate('right');
        assert_equals(document.activeElement, document.querySelector('#s4'));
        navigate('right');
        assert_equals(document.activeElement, document.querySelector('#s17'));
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s18'));
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s6'));
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s5'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s20'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s10'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s9'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s14'));
        navigate('up');
        assert_equals(document.activeElement, document.querySelector('#s15'));
        navigate('up');
        assert_equals(document.activeElement, document.querySelector('#s13'));
        navigate('up');
        assert_equals(document.activeElement, document.querySelector('#s18'));
        navigate('up');
        assert_equals(document.activeElement, document.querySelector('#s17'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s4'));
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s21'));
        document.querySelector('#s3').focus();
        navigate('right');
        assert_equals(document.activeElement, document.querySelector('#s21'));

      }, `--spatial-navigation-function TC${testNum++}. grid rule check`);

      testRun(function() {
        changeRule('euclidean');
        document.querySelector('#s17').focus();
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s16'));
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s18'));
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s6'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s19'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s5'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s20'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s10'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s9'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s14'));
        navigate('up');
        assert_equals(document.activeElement, document.querySelector('#s20'));
      }, `--spatial-navigation-function TC${testNum++}. euclidean rule check`);

      testRun(function() {
        changeRule('normal');
        document.querySelector('#s3').focus();
        navigate('right');
        assert_equals(document.activeElement, document.querySelector('#s18'));
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s6'));
        navigate('left');
        assert_equals(document.activeElement, document.querySelector('#s10'));
        navigate('right');
        assert_equals(document.activeElement, document.querySelector('#s20'));
        navigate('up');
        assert_equals(document.activeElement, document.querySelector('#s3'));
        navigate('up');
        assert_equals(document.activeElement, document.querySelector('#s21'));
        navigate('down');
        assert_equals(document.activeElement, document.querySelector('#s3'));
      }, `--spatial-navigation-function TC${testNum++}. normal rule check`);

    };
  </script>

</html>
